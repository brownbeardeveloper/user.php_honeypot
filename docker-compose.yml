services:
  honeypot:
    build: .
    image: honeypot:latest
    container_name: honeypot_container
    user: "33:33"  # www-data UID:GID on Alpine/PHP
    ports:
      - "127.0.0.1:8002:8002"
    restart: unless-stopped
    read_only: true
    tmpfs:
      - /tmp:rw,size=8M,uid=33,gid=33
    pids_limit: 128
    init: true
    security_opt:
      - no-new-privileges:true
    cap_drop:
      - ALL
    volumes:
      - ./service/honeypot.log:/var/log/honeypot/honeypot.log:rw
    networks:
      - hpnet
      - edge

networks:
  hpnet:
    driver: bridge
    internal: true
  edge:
    driver: bridge